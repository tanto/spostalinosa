<!doctype html>
<html>
<head>
    <meta property="og:title" content="Si avverte la gentile clientela che c'&egrave; da spostare un'isola - Un post su TANTO" />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="http://blog.spaziogis.it/?p=6377" />
    <meta property="og:image" content="http://blog.spaziogis.it/wp-content/uploads/2014/09/PANO_20140825_104228.jpg" />    
    <meta charset="utf-8">
    <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
    <title>Si avverte la gentile clientela che c'&egrave; da spostare un'isola - Un post su TANTO</title>
    <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.7.1/leaflet.css" />

    <style type="text/css">
    html, body { width: 100%; height: 100%; margin: 0; }
    #map1, #map2 { width: 49.5%; height: 100%; }
    #map1 { float: left; }
    #map2 { float: right; }

    #map-ui {
        position: absolute;
        bottom: 2px;
        left: 2px;
        z-index: 100;
        border-width: 1px;
        -webkit-border-radius: 3px 3px 3px 3px;
        border-radius: 3px 3px 3px 3px;
        background: #2B82CB;
        border-color: #2B82CB;
        border-top-color: #FFF;
        padding: 2px;
        overflow-y: auto;
        overflow-x: hidden;
        max-height: 60px;
        font-size: 14px;
    }
    #map-ui p {
        padding: 0px;
        margin: 0px 2px 0px 2px;
        color: #FFFFFF;
        font-size: 14px;
    }
    #map-ui img {
        padding: 0px;
        margin: 0px;
    }
    #map-ui a:link { 
        color: #FFF;
    }
    #map-ui a:visited { 
        color: #FFF;
    }
    #map-ui a:hover {
        color: #FFF;
    }
    #map-ui a:active { 
        color: #FFF;
    }

    </style>
</head>

<body>
    <div id="map1">
        <div id="map-ui">
            <p>Andrea Borruso per <strong><a href="http://blog.spaziogis.it/?p=6377" target="_blank">TANTO</a></strong></p>
        </div>
    </div>
    <div id="map2"></div>
    <script src="http://cdn.leafletjs.com/leaflet-0.7.1/leaflet-src.js"></script>
    <script src="./plugin/L.Map.Sync.js"></script>

    <script src="./plugin/layer/tile/Bing.js"></script>

    <script src="./linosa.js"></script>

    <script type="text/javascript">

    var southWestB = L.latLng(35.8345,12.8188),
    northEastB = L.latLng(35.8897,12.9088),
    boundsB = L.latLngBounds(southWestB, northEastB);

    var southWest = L.latLng(35.8531,12.8442),
    northEast = L.latLng(35.8779,12.8837),
    bounds = L.latLngBounds(southWest, northEast);

    //var center = [59.336, 5.967];

    var sitrsic = L.tileLayer.wms("http://map.sitr.regione.sicilia.it/ArcGIS/services/CACHED/ortofoto_ata20072008_webmercatore/MapServer/WMSServer?", {
        layers: '0',
        format: 'image/jpeg',
        attribution: "<a href='http://www.sitr.regione.sicilia.it/geoportale/' target='_blank'>Geoportale Regione Siciliana</a>",
    });

    var osm = new L.TileLayer('http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',{
        attribution: "Â© <a href='http://www.openstreetmap.org/copyright' target='_blank'>OpenStreetMap contributors</a>"
    });

    var osm_old = new L.tileLayer('data/tiles_20140904/{z}/{x}/{y}.png', {
        tms: true,
        opacity: 1,
    });


    var bing = new L.BingLayer("AuAHZ8dN05taF2Vo9n1C06pMPnDWHWSmlgA8dtCaQNpKcIphdPsN27KZiQ9iwpGB");

    var map1 = L.map('map1', {layers: [sitrsic],maxBounds: boundsB,minZoom:13,maxZoom:18});

    map1.fitBounds(bounds);

    map1.attributionControl.setPrefix('');

    var map2 = L.map('map2');



    map1.sync(map2);
    map2.sync(map1);

    map2.addLayer(bing);
    map2.addControl(new L.Control.Layers( {'Bing maps':bing, 'OSM':osm,'OSM vecchia':osm_old}, {},{collapsed:false}));

    function onEachFeature(feature, layer) {
        var popupContent = "<p>ciao mondo</p>";

        if (feature.properties && feature.properties.popupContent) {
            popupContent += feature.properties.popupContent;
        }

        //layer.bindPopup(popupContent);
    }


    L.geoJson(linosa, {

        onEachFeature: onEachFeature
    }).addTo(map1);
    L.geoJson(linosa, {

        onEachFeature: onEachFeature
    }).addTo(map2);

    var marker1 = L.marker([0, 0]).addTo(map1);
    marker1.setLatLng(map1.getCenter());
    map1.on('move', function () {
        marker1.setLatLng(map1.getCenter());
        marker2.setLatLng(map2.getCenter());
    });

    var marker2 = L.marker([0, 0]).addTo(map2);
    marker2.setLatLng(map2.getCenter());
    map2.on('move', function () {
        marker1.setLatLng(map1.getCenter());
        marker2.setLatLng(map2.getCenter());
    });

    </script>
</body>
</html>